<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
  <title>Todo List</title>

  <style>
    #Edit {
      display: none;
    }
  </style>
</head>
<body>

<h1>Todo List</h1>

Task:
<input type="text" id="Tasks">

Description:
<input type="text" id="taskdesc">

<button onclick="addTask()">Add Task</button>
<button onclick="resetTasks()">Clear All</button>

<div id="Edit">
  <h3>Update Task</h3>
  Task:
  <input type="text" id="UpdatedTask"><br><br>
  Description:
  <input type="text" id="Updatetaskdes"><br><br>
  <button onclick="updateTask()">Update</button>
</div>

<ul id="tasksList"></ul>

<script>
  let counter = 0;
  let currentUpdateId = null;

  function addTask() {
    const task = document.getElementById("Tasks").value;
    const desc = document.getElementById("taskdesc").value;

    if (task === "" || !isNaN(task)) {
      alert("Enter valid task");
      return;
    }

    counter++;
    const date = new Date().toLocaleString();

    const li = document.createElement("li");
    // ID ko <li> par shift kar diya taaki asani se delete/update ho sake
    li.id = `task-item-${counter}`; 
    
    li.innerHTML = `
      <div id="taskdetails-${counter}">
        <h3 id="taskname-${counter}">${task}</h3>
        <p id="taskdescription-${counter}">${desc}</p>
        <small>${date}</small><br><br>

        <button onclick="showUpdate(${counter})">Update</button>
        <button onclick="deleteTask(${counter})">Delete</button>
      </div>
    `;

    document.getElementById("tasksList").appendChild(li);

    document.getElementById("Tasks").value = "";
    document.getElementById("taskdesc").value = "";
  }

  function showUpdate(id) {
    const ask = confirm("Do you really want to update this task?");
    if (!ask) return;

    document.getElementById("Edit").style.display = "block";

    document.getElementById("UpdatedTask").value =
      document.getElementById(`taskname-${id}`).innerText;

    document.getElementById("Updatetaskdes").value =
      document.getElementById(`taskdescription-${id}`).innerText;

    currentUpdateId = id;
  }

  function updateTask() {
    document.getElementById(`taskname-${currentUpdateId}`).innerText =
      document.getElementById("UpdatedTask").value;

    document.getElementById(`taskdescription-${currentUpdateId}`).innerText =
      document.getElementById("Updatetaskdes").value;

    alert("TASK UPDATED SUCCESSFULLY!");

    document.getElementById("Edit").style.display = "none";
    currentUpdateId = null;
  }

  function deleteTask(id) {
    const ask = confirm("Do you really want to delete this task?");
    if (ask) {
      const elementToRemove = document.getElementById(`task-item-${id}`);
      elementToRemove.remove();
      alert("TASK DELETED");
    }
  }

  function resetTasks() {
    document.getElementById("tasksList").innerHTML = "";
    document.getElementById("Edit").style.display = "none";
    counter = 0;
    currentUpdateId = null;
  }
</script>

</body>
</html>