<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo List</title>

    <style>
      #Edit {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>Todo List</h1>

    Enter Task:
    <input type="text" id="Tasks" />

    Enter Task Description:
    <input type="text" id="taskdesc" />

    <button onclick="addTask()">Add Task</button>
    <button onclick="resetTasks()">Clear All</button>

    <div id="Edit">
      <h3>Update Task</h3>

      Enter Task:
      <input type="text" id="UpdatedTask" /><br /><br />

      Enter Description:
      <input type="text" id="Updatetaskdes" /><br /><br />

      <button onclick="updateTask()">Update</button>
    </div>

    <ul id="tasksList"></ul>

    <script>
      let counter = 0;
      let currentUpdateId = null;

      function addTask() {
        const taskInput = document.getElementById("Tasks").value;
        const taskDesc = document.getElementById("taskdesc").value;

        if (taskInput === "" || !isNaN(taskInput)) {
          alert("Please enter a valid task");
          return;
        }

        counter++;

        const date = new Date().toLocaleString();
        const li = document.createElement("li");

        li.innerHTML = `
      <div id="taskdetails-${counter}">
        <h3 id="taskname-${counter}">${taskInput}</h3>
        <p id="taskdescription-${counter}">${taskDesc}</p>
        <p>${date}</p>

        <button onclick="showUpdate(${counter})">Update</button>
        <button onclick="deleteTask(this)">Delete</button>
      </div>
    `;

        document.getElementById("tasksList").appendChild(li);

        document.getElementById("Tasks").value = "";
        document.getElementById("taskdesc").value = "";
      }

      function showUpdate(id) {
        document.getElementById("Edit").style.display = "block";

        document.getElementById("UpdatedTask").value = document.getElementById(
          `taskname-${id}`
        ).innerText;

        document.getElementById("Updatetaskdes").value =
          document.getElementById(`taskdescription-${id}`).innerText;

        currentUpdateId = id;
      }

      function updateTask() {
        if (currentUpdateId === null) {
          alert("No task selected");
          return;
        }

        const confirmUpdate = confirm(
          "Do you really want to update this task?"
        );

        if (!confirmUpdate) {
          return;
        }

        document.getElementById(`taskname-${currentUpdateId}`).innerText =
          document.getElementById("UpdatedTask").value;

        document.getElementById(
          `taskdescription-${currentUpdateId}`
        ).innerText = document.getElementById("Updatetaskdes").value;

        alert("TASK UPDATED SUCCESSFULLY!");

        document.getElementById("Edit").style.display = "none";
        currentUpdateId = null;
      }

      function deleteTask(btn) {
        const confirmDelete = confirm(
          "Do you really want to delete this task?"
        );
        if (confirmDelete) {
          btn.parentElement.remove();
          alert("TASK DELETED SUCCESSFULLY!");
        }
      }

      function resetTasks() {
        document.getElementById("tasksList").innerHTML = "";
        document.getElementById("Edit").style.display = "none";
        counter = 0;
        currentUpdateId = null;
      }
    </script>
  </body>
</html>
