<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />

  <title>Todo List with Popup</title>

  <style>
    #Edit {
      display: none;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;

      background:
        radial-gradient(circle at top left, #ffd1dc, transparent 40%),
        radial-gradient(circle at bottom right, #ffe6f0, transparent 40%),
        #ffffff;

      font-family: "Segoe UI", sans-serif;
    }

    h1 {
      margin-top: 20px;
    }


    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .popup {
      width: 360px;
      background: linear-gradient(180deg, #fff0f6, #ffffff);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      animation: pop 0.5s ease;
    }

    @keyframes pop {
      from {
        transform: scale(0.6);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .panda {
      font-size: 70px;
      animation: wave 1s infinite alternate;
    }

    @keyframes wave {
      from { transform: rotate(-5deg); }
      to { transform: rotate(5deg); }
    }

    .close-btn {
      margin-top: 15px;
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      background: #ff6f91;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    .close-btn:hover {
      background: #ff4f7a;
    }

    #countdownMsg {
      margin-top: 10px;
      color: #ff4f7a;
      font-weight: bold;
    }


    input {
      padding: 8px;
      margin: 5px;
    }

    button {
      padding: 6px 12px;
      margin: 5px;
      cursor: pointer;
    }

    ul {
      list-style: none;
      padding: 0;
      width: 300px;
    }

    li {
      background: #fff0f6;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
    }
  </style>
</head>

<body>

  <h1>Todo List</h1>

  <div class="overlay" id="overlay">
    <div class="popup">
      <div class="panda">üêº</div>
      <h2>Welcome!</h2>
      <p>Thanks for visiting my site üíñ</p>

      <p id="countdownMsg"></p>

      <button class="close-btn" onclick="closepopup()">
        <i class="fa-solid fa-heart"></i> CLOSE
      </button>
    </div>
  </div>

  Task:
  <input type="text" id="Tasks" />

  Description:
  <input type="text" id="taskdesc" />

  <button onclick="addTask()">Add Task</button>
  <button onclick="resetTasks()">Clear All</button>

  <div id="Edit">
    <h3>Update Task</h3>
    Task:
    <input type="text" id="UpdatedTask" /><br /><br />
    Description:
    <input type="text" id="Updatetaskdes" /><br /><br />
    <button onclick="updateTask()">Update</button>
  </div>

  <ul id="tasksList"></ul>

  <script>

    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("overlay").style.display = "flex";
      }, 2000);
    });

    function closepopup() {
      let seconds = 5;
      const msg = document.getElementById("countdownMsg");
      const overlay = document.getElementById("overlay");

      msg.innerText = `Closing in ${seconds} seconds...`;

      const timer = setInterval(() => {
        seconds--;
        msg.innerText = `Closing in ${seconds} seconds...`;

        if (seconds === 0) {
          clearInterval(timer);
          overlay.style.display = "none";
          msg.innerText = "";
        }
      }, 1000);
    }

    let counter = 0;
    let currentUpdateId = null;

    function addTask() {
      const task = document.getElementById("Tasks").value;
      const desc = document.getElementById("taskdesc").value;

      if (task === "" || !isNaN(task)) {
        alert("Enter valid task");
        return;
      }

      counter++;
      const date = new Date().toLocaleString();

      const li = document.createElement("li");
      li.id = `task-item-${counter}`;

      li.innerHTML = `
        <h3 id="taskname-${counter}">${task}</h3>
        <p id="taskdescription-${counter}">${desc}</p>
        <small>${date}</small><br><br>
        <button onclick="showUpdate(${counter})">Update</button>
        <button onclick="deleteTask(${counter})">Delete</button>
      `;

      document.getElementById("tasksList").appendChild(li);
      document.getElementById("Tasks").value = "";
      document.getElementById("taskdesc").value = "";
    }

    function showUpdate(id) {
      document.getElementById("Edit").style.display = "block";
      document.getElementById("UpdatedTask").value =
        document.getElementById(`taskname-${id}`).innerText;
      document.getElementById("Updatetaskdes").value =
        document.getElementById(`taskdescription-${id}`).innerText;

      currentUpdateId = id;
    }

    function updateTask() {
      document.getElementById(`taskname-${currentUpdateId}`).innerText =
        document.getElementById("UpdatedTask").value;

      document.getElementById(`taskdescription-${currentUpdateId}`).innerText =
        document.getElementById("Updatetaskdes").value;

      alert("TASK UPDATED");
      document.getElementById("Edit").style.display = "none";
    }

    function deleteTask(id) {
      document.getElementById(`task-item-${id}`).remove();
    }

    function resetTasks() {
      document.getElementById("tasksList").innerHTML = "";
      document.getElementById("Edit").style.display = "none";
      counter = 0;
    }
  </script>

</body>
</html>
